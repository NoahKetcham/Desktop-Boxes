<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Boxes.App.ViewModels"
        x:Class="Boxes.App.Views.DesktopBoxWindow"
        x:DataType="vm:DesktopBoxWindowViewModel"
        Width="320"
        Height="240"
        CanResize="True"
        CanMinimize="False"
        CanMaximize="False"
        ShowActivated="True"
        WindowStartupLocation="Manual"
        SystemDecorations="BorderOnly">

    <Grid Background="#1C2235" ClipToBounds="True"
          DragDrop.AllowDrop="True"
          DragDrop.DragEnter="Content_OnDragEnter"
          DragDrop.DragOver="Content_OnDragOver"
          DragDrop.Drop="Content_OnDrop">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#232B46" Padding="12" PointerPressed="Header_PointerPressed">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold"/>
                <Button Content="Ã—" Grid.Column="1" Width="24" Height="24" Command="{Binding CloseCommand}"/>
            </Grid>
        </Border>

        <Border Grid.Row="1" Padding="16" BorderBrush="#2D3654" BorderThickness="1" CornerRadius="0,0,8,8">
            <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <Button Content="Home" Command="{Binding NavigateHomeCommand}"/>
                    <Button Content="Up" Command="{Binding NavigateUpCommand}"/>
                    <TextBlock Text="{Binding CurrentPath}" VerticalAlignment="Center"/>
                </StackPanel>
                <ItemsControl x:Name="ShortcutsItemsControl" ItemsSource="{Binding CurrentItems}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel ItemWidth="96" ItemHeight="96" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="vm:DesktopFileViewModel">
                            <Border Width="96" Height="96" Background="Transparent" Margin="8" Cursor="Hand" DoubleTapped="ShortcutTile_OnDoubleTapped">
                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="6">
                                    <Border Width="48" Height="48" Background="#101627" CornerRadius="4" HorizontalAlignment="Center">
                                        <Image Source="{Binding Icon}" Width="48" Height="48" Stretch="Uniform"/>
                                    </Border>
                                    <TextBlock Text="{Binding DisplayName}" TextWrapping="Wrap" TextAlignment="Center" MaxWidth="96" FontSize="12"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>

        <Border Tag="Right" HorizontalAlignment="Right" VerticalAlignment="Stretch" Width="6" Background="Transparent"
                PointerPressed="ResizeHandle_OnPointerPressed"/>
        <Border Tag="Bottom" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="6" Background="Transparent"
                PointerPressed="ResizeHandle_OnPointerPressed"/>
        <Border Tag="BottomRight" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="12" Height="12" Background="Transparent"
                PointerPressed="ResizeHandle_OnPointerPressed"/>
    </Grid>

</Window>

